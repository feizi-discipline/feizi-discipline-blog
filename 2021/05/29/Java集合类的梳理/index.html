<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  
    <meta name="keywords" content="博客 blog Blog">
  
  
    <meta name="description" content="blog">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    集合类的梳理 |
    
    壹周杂货铺</title>
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<script src="/js/pace.min.js"></script>

<meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="壹周杂货铺" type="application/atom+xml">
</head>

<body>
<main class="content">
  <section class="outer">
  

<article id="post-Java集合类的梳理" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      集合类的梳理
    </h1>
  
  




      </header>
    

    
      <div class="article-meta">
        <a href="/2021/05/29/Java%E9%9B%86%E5%90%88%E7%B1%BB%E7%9A%84%E6%A2%B3%E7%90%86/" class="article-date">
  <time datetime="2021-05-29T07:55:00.000Z" itemprop="datePublished">2021-05-29</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

      </div>
    

    
      
    <div class="tocbot"></div>





    

    <div class="article-entry" itemprop="articleBody">
      


      

      
        <p>在编程中，常常需要集中存放多个数据。从传统意义上讲，数组是我们的一个很好的选择，前提是我们事先已经明确知道我们将要保存的对象的数量。一旦在数组初始化时指定了这个数组长度，这个数组长度就是不可变的，如果我们需要保存一个可以动态增长的数据(在编译时无法确定具体的数量)，java的集合类就是一个很好的设计方案了。</p>
<a id="more"></a>

<p>集合类主要负责保存、盛装其他数据，因此集合类也被称为容器类。所以的集合类都位于java.util包下，后来为了处理多线程环境下的并发安全问题，java5还在java.util.concurrent包下提供了一些多线程支持的集合类。</p>
<h1 id="Java集合类-Set、List、Map、Queue使用场景梳理"><a href="#Java集合类-Set、List、Map、Queue使用场景梳理" class="headerlink" title="Java集合类: Set、List、Map、Queue使用场景梳理"></a>Java集合类: Set、List、Map、Queue使用场景梳理</h1><blockquote>
<p>Collection一组”对立”的元素，通常这些元素都服从某种规则。　　<br>List必须保持元素特定的顺序，Set不能有重复元素，Queue保持一个队列(先进先出)的顺序。<br>Map一组成对的”键值对”对象。</p>
</blockquote>
<h2 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h2><blockquote>
<p>Collection 每个位置只能保存一个元素(对象)。<br>Map保存的是”键值对”，就像一个小型数据库。我们可以通过”键”找到该键对应的”值”。</p>
</blockquote>
<h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><ul>
<li>Set集合类似于一个罐子，”丢进”Set集合里的多个对象之间没有明显的顺序。</li>
<li>Set继承自Collection接口，不能包含有重复元素(记住，这是整个Set类层次的共有属性)。</li>
</ul>
<h3 id="在使用Set集合的时候，应该注意两点："><a href="#在使用Set集合的时候，应该注意两点：" class="headerlink" title="在使用Set集合的时候，应该注意两点："></a>在使用Set集合的时候，应该注意两点：</h3><blockquote>
<p>(1) 为Set集合里的元素的实现类实现一个有效的equals(Object)方法。<br>(2) 对Set的构造函数，传入的Collection参数不能包含重复的元素。</p>
</blockquote>
<h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><ul>
<li>List集合代表一个元素有序、可重复的集合，集合中每个元素都有其对应的顺序索引。</li>
<li>List集合允许加入重复元素，因为它可以通过索引来访问指定位置的集合元素。List集合默认按元素的添加顺序设置元素的索引。</li>
</ul>
<h3 id="集合截取问题"><a href="#集合截取问题" class="headerlink" title="集合截取问题"></a>集合截取问题</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list.subList(start,end);  <span class="comment">//截取从start元素（包括）开始到end元素（不包括）位置结束。（下标从0开始）</span></span><br></pre></td></tr></table></figure>
<h3 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h3><p>ArrayList是基于数组实现的List类，它封装了一个动态的增长的、允许再分配的Object[]数组。</p>
<h3 id="Arrays-asList-方法的使用"><a href="#Arrays-asList-方法的使用" class="headerlink" title="Arrays.asList()方法的使用"></a>Arrays.asList()方法的使用</h3><p>该方法是将数组转化为list。有以下几点需要注意：</p>
<blockquote>
<p>（1）该方法不适用于基本数据类型（byte,short,int,long,float,double,boolean）。<br>（2）该方法将数组与列表链接起来，当更新其中之一时，另一个自动更新。<br>（3）不支持add和remove方法。</p>
</blockquote>
<h3 id="Java集合的交集，并集和差集"><a href="#Java集合的交集，并集和差集" class="headerlink" title="Java集合的交集，并集和差集"></a>Java集合的交集，并集和差集</h3><h3 id="交集-A-retainAll-B-交集的结果在集合A中。"><a href="#交集-A-retainAll-B-交集的结果在集合A中。" class="headerlink" title="交集  A.retainAll(B) ,交集的结果在集合A中。"></a>交集  A.retainAll(B) ,交集的结果在集合A中。</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">List stringList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">stringList.add(<span class="string">&quot;4&quot;</span>);</span><br><span class="line"></span><br><span class="line">stringList.add(<span class="string">&quot;3&quot;</span>);</span><br><span class="line"></span><br><span class="line">stringList.add(<span class="string">&quot;2&quot;</span>);</span><br><span class="line"></span><br><span class="line">stringList.add(<span class="string">&quot;1&quot;</span>);</span><br><span class="line"></span><br><span class="line">List list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">list.add(<span class="string">&quot;3&quot;</span>);</span><br><span class="line"></span><br><span class="line">list.add(<span class="string">&quot;2&quot;</span>);</span><br><span class="line"></span><br><span class="line">list.add(<span class="string">&quot;8&quot;</span>);</span><br><span class="line"></span><br><span class="line">list.add(<span class="string">&quot;9&quot;</span>);</span><br><span class="line"></span><br><span class="line">stringList.retainAll(list);</span><br><span class="line"></span><br><span class="line">System.out.println(stringList);</span><br><span class="line"></span><br><span class="line">System.out.println(stringList.size());</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="并集-A-addAll-B-因为set本身就去重，所有直接全部添加到一个集合中取并集。"><a href="#并集-A-addAll-B-因为set本身就去重，所有直接全部添加到一个集合中取并集。" class="headerlink" title="并集 A.addAll(B) 因为set本身就去重，所有直接全部添加到一个集合中取并集。"></a>并集 A.addAll(B) 因为set本身就去重，所有直接全部添加到一个集合中取并集。</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Set stringList = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line"></span><br><span class="line">stringList.add(<span class="string">&quot;4&quot;</span>);</span><br><span class="line"></span><br><span class="line">stringList.add(<span class="string">&quot;3&quot;</span>);</span><br><span class="line"></span><br><span class="line">stringList.add(<span class="string">&quot;2&quot;</span>);</span><br><span class="line"></span><br><span class="line">stringList.add(<span class="string">&quot;1&quot;</span>);</span><br><span class="line"></span><br><span class="line">Set list = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line"></span><br><span class="line">list.add(<span class="string">&quot;3&quot;</span>);</span><br><span class="line"></span><br><span class="line">list.add(<span class="string">&quot;2&quot;</span>);</span><br><span class="line"></span><br><span class="line">list.add(<span class="string">&quot;8&quot;</span>);</span><br><span class="line"></span><br><span class="line">list.add(<span class="string">&quot;9&quot;</span>);</span><br><span class="line"></span><br><span class="line">stringList.addAll(list);</span><br><span class="line"></span><br><span class="line">System.out.println(stringList);</span><br><span class="line"></span><br><span class="line">System.out.println(stringList.size());</span><br></pre></td></tr></table></figure>
<p><font color="red">注意</font>：并集要使用Set，不然会有重复值。</p>
<h3 id="差集-removeAll方法，去掉一集合中包含的另一个集合的值。A-removeAll-B-。"><a href="#差集-removeAll方法，去掉一集合中包含的另一个集合的值。A-removeAll-B-。" class="headerlink" title="差集 removeAll方法，去掉一集合中包含的另一个集合的值。A.removeAll(B)。"></a>差集 removeAll方法，去掉一集合中包含的另一个集合的值。A.removeAll(B)。</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">List stringList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">stringList.add(<span class="string">&quot;4&quot;</span>);</span><br><span class="line"></span><br><span class="line">stringList.add(<span class="string">&quot;3&quot;</span>);</span><br><span class="line"></span><br><span class="line">stringList.add(<span class="string">&quot;2&quot;</span>);</span><br><span class="line"></span><br><span class="line">stringList.add(<span class="string">&quot;1&quot;</span>);</span><br><span class="line"></span><br><span class="line">List list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">list.add(<span class="string">&quot;3&quot;</span>);</span><br><span class="line"></span><br><span class="line">list.add(<span class="string">&quot;2&quot;</span>);</span><br><span class="line"></span><br><span class="line">list.add(<span class="string">&quot;8&quot;</span>);</span><br><span class="line"></span><br><span class="line">list.add(<span class="string">&quot;9&quot;</span>);</span><br><span class="line"></span><br><span class="line">stringList.removeAll(list);</span><br><span class="line"></span><br><span class="line">System.out.println(stringList);</span><br><span class="line"></span><br><span class="line">System.out.println(stringList.size());</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Queue"><a href="#Queue" class="headerlink" title="Queue"></a>Queue</h2><ul>
<li>Queue用于模拟”队列”这种数据结构(先进先出 FIFO)。</li>
<li>队列的头部保存着队列中存放时间最长的元素，队列的尾部保存着队列中存放时间最短的元素。</li>
<li>新元素插入(offer)到队列的尾部，访问元素(poll)操作会返回队列头部的元素，队列不允许随机访问队列中的元素。</li>
</ul>
<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><ul>
<li>Map用于保存具有”映射关系”的数据，因此Map集合里保存着两组值，一组值用于保存Map里的key，另外一组值用于保存Map里的value。</li>
<li>key和value都可以是任何引用类型的数据。Map的key不允许重复，即同一个Map对象的任何两个key通过equals方法比较结果总是返回false。</li>
<li>Map的这些实现类和子接口中key集的存储形式和Set集合完全相同(即key不能重复) Map的这些实现类和子接口中value集的存储形式和List非常类似(即value可以重复、根据索引来查找)。</li>
</ul>
<h3 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h3><p>和HashSet集合不能保证元素的顺序一样，HashMap也不能保证key-value对的顺序。并且类似于HashSet判断两个key是否相等的标准也是: 两个key通过equals()方法比较返回true、同时两个key的hashCode值也必须相等</p>
<p>map中的遍历：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// KeySet 获取key</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (Integer key : map.keySet()) &#123;</span><br><span class="line"></span><br><span class="line">   System.out.println(key);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// values 获取value</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (Object value : map.values()) &#123;</span><br><span class="line"></span><br><span class="line">System.out.println(value);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// entrySet 获取key and value</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (Map.Entry&lt;Integer, Object&gt; entry : map.entrySet()) &#123;</span><br><span class="line"></span><br><span class="line">    System.out.println(entry.getKey() + <span class="string">&quot;:&quot;</span> + entry.getValue());</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Iterator entrySet 获取key and value</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testIterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">Iterator&lt;Map.Entry&lt;Integer, Integer&gt;&gt; it = map.entrySet().iterator();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line"></span><br><span class="line">Map.Entry&lt;Integer, Integer&gt; entry = it.next();</span><br><span class="line"></span><br><span class="line">         System.out.println(entry.getKey() + <span class="string">&quot;:&quot;</span> + entry.getValue());</span><br><span class="line"></span><br><span class="line">          <span class="comment">// it.remove(); 删除元素</span></span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="简单性能测试"><a href="#简单性能测试" class="headerlink" title="简单性能测试"></a>简单性能测试</h3><table>
<thead>
<tr>
<th>方法</th>
<th>耗时</th>
<th align="center">做什么</th>
</tr>
</thead>
<tbody><tr>
<td>KeySet</td>
<td>392</td>
<td align="center">获取key</td>
</tr>
<tr>
<td>Values</td>
<td>320</td>
<td align="center">获取Values</td>
</tr>
<tr>
<td>entrySet</td>
<td>465</td>
<td align="center">获取key and value</td>
</tr>
<tr>
<td>entrySet entrySet</td>
<td>508</td>
<td align="center">获取key and value</td>
</tr>
<tr>
<td>Lambda</td>
<td>536</td>
<td align="center">获取key and value</td>
</tr>
</tbody></table>
<h3 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h3><blockquote>
<p>如果<code>只是获取key</code>，或者<code>value</code>，推荐使用<code>keySet</code>或者<code>values</code>方式。 </p>
</blockquote>
<blockquote>
<p>如果<code>同时需要key</code>和<code>value</code>，推荐使用<code>entrySet</code>。</p>
</blockquote>
<blockquote>
<p>如果需要在遍历过程中删除元素，推荐使用<code>Iterator</code>。  </p>
</blockquote>
<blockquote>
<p>如果需要在遍历过程中增加元素，可以新建一个临时map存放新增的元素，等遍历完毕，再把临时map放到原来的map中。</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://feizi-discipline.gitee.io/2021/05/29/Java%E9%9B%86%E5%90%88%E7%B1%BB%E7%9A%84%E6%A2%B3%E7%90%86/" data-id="ckwitivhf0003cgyu0ksecz0n"
         class="article-share-link">分享</a>
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9B%86%E5%90%88%E7%B1%BB/" rel="tag">集合类</a></li></ul>

    </footer>

  </div>

  
    
  <nav class="article-nav">
    
      <a href="/2021/11/26/Docker%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2MdNice%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            本地及 Docker 部署 MdNice 开源项目
          
        </div>
      </a>
    
    
      <a href="/2021/04/18/%E8%AE%B0%E4%B8%80%E6%AC%A1%E7%BB%99Mac%E9%85%8D%E7%BD%AE%E5%A4%96%E6%8E%A5%E6%98%BE%E7%A4%BA%E5%99%A8/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">记一次给Mac配置外接显示器</div>
      </a>
    
  </nav>


  

  
    
  

</article>



</section>
  <footer class="footer">
  <div class="outer">
    <div class="float-right">
      <ul class="list-inline">
  
    <li><i class="fe fe-smile-alt"></i> <span id="busuanzi_value_site_uv"></span></li>
  
</ul>
    </div>
    <ul class="list-inline">
      <li>&copy; 2021 壹周杂货铺</li>
      <li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
      <li>Theme  <a target="_blank" rel="noopener" href="https://github.com/zhwangart/hexo-theme-ocean">Ocean</a></li>
    </ul>
  </div>
</footer>

</main>

<aside class="sidebar sidebar-specter">
  
    <button class="navbar-toggle"></button>
<nav class="navbar">
  
    <div class="logo">
      <a href="/"><img src="/images/oneweek.svg" alt="壹周杂货铺"></a>
    </div>
  
  <ul class="nav nav-main">
    
      <li class="nav-item">
        <a class="nav-item-link" href="/">主页</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/archives">归档</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/gallery">相册</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/about">关于</a>
      </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="搜索">
        <i class="fe fe-search"></i>
        搜索
      </a>
    </li>
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      <div class="totop" id="totop">
  <i class="fe fe-rocket"></i>
</div>
    </li>
    <li class="nav-item">
      
        <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
          <i class="fe fe-feed"></i>
        </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
  </aside>
  
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script src="/js/busuanzi-2.3.pure.min.js"></script>


  
<script src="/fancybox/jquery.fancybox.min.js"></script>




  
<script src="/js/tocbot.min.js"></script>

  <script>
    // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
    tocbot.init({
      tocSelector: '.tocbot',
      contentSelector: '.article-entry',
      headingSelector: 'h1, h2, h3, h4, h5, h6',
      hasInnerContainers: true,
      scrollSmooth: true,
      positionFixedSelector: '.tocbot',
      positionFixedClass: 'is-position-fixed',
      fixedSidebarOffset: 'auto',
    });
  </script>



<script src="/js/ocean.js"></script>


</body>
</html>